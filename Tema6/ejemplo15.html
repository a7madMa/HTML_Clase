<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Weather Map</title>
</head>

<body>
    <h1>Open Weather Map</h1>

    <h2>El tiempo en <span id="ciudad"></span> es: </h2>
    <p> Temperatura actual <span id="temperatura"></span> ºC</p>
    <p>La salida del sol es a las <span id="salidaDeSol"></span> horas</p>
    <p>La puesta del sol es a las <span id="puestaDeSol"></span> horas</p>

    <script>
        "use strict"

        let url = "https://api.openweathermap.org/data/2.5/weather?q=Ourense&appid=7dcc6bb908fc23a49ee9184422cc7cfd&units=metric";

        fetch(url)
            .then(function (respuesta) {
                return respuesta.json();
            })
            .then(function (respuestaJSON) {
                let ciudad = respuestaJSON.name;
                let temperatura = respuestaJSON.main.temp;

                let salidaSol = respuestaJSON.sys.sunrise;

                let puestaSol = respuestaJSON.sys.sunset;

                console.log(`Ciudad: ${ciudad}`);
                document.getElementById('ciudad').innerHTML = ciudad;

                console.log(`Temperatura: ${temperatura}ºC`);
                document.getElementById('temperatura').innerHTML = temperatura;


                console.log(`Amanecer: ${epochAFecha(salidaSol)}`);
                document.getElementById('salidaDeSol').innerHTML = epochAFecha(salidaSol)

                console.log(`Anochecer: ${epochAFecha(puestaSol)}`);
                document.getElementById('puestaDeSol').innerHTML = epochAFecha(puestaSol)



            })
            .catch(function () {
                console.log("Error en la petición de datos.");
            });

        function epochAFecha(epoch) {
            let tiempo = new Date(epoch * 1000);
            return tiempo.getHours() + ":" + tiempo.getMinutes();


        }

    </script>
</body>

</html>